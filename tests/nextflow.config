/*
========================================================================================
    Nextflow config file for running tests
========================================================================================
*/

params {
    meta = [id:"test"]
    containers_dir="$CONTAINER_DIR"
    db_path = "${projectDir}/tests/test_data/test_kraken_databases/minimal"
}

process {
    // default container
    container = "${params.containers_dir}/base_container.sif"

    withLabel: ivar {
        container = "${params.containers_dir}/ivar.sif"
    }

    withLabel: kraken {
        container = "${params.containers_dir}/kraken.sif"
    }

    withLabel: pangolin {
        container = "${params.containers_dir}/pangolin.sif"
    }

    withLabel: kraken2ref {
        //container = "${params.containers_dir}/kraken2ref.sif"
        container = "/lustre/scratch126/gsu/team112/personal/ad45/rvi_box/DT2679_improve_k2r_memory_usage/kraken2ref_branch.sif"
        // TEMPORARY CONTAINER, THIS SHOULD BE UPDATED AFTER THE NEW K2R RELEASE
    }

    // ignore memory LSF k2r escalation strategy
    withLabel: mem_k2r_escalate {
        memory = "1 GB"
    }

    withLabel: qc {
        container = "${params.containers_dir}/qc.sif"
    }
}
