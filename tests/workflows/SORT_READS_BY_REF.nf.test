

nextflow_workflow {

    name "Test Workflow SORT_READS_BY_REF manifest checks"
    script "workflows/SORT_READS_BY_REF.nf"
    workflow "SORT_READS_BY_REF"

    test("Workflow Should run end to end without failures, no changes on snapshot expected") {

        when {
            params {
                test_loc="${projectDir}/tests/test_data"
                db_path="${projectDir}/tests/test_data/test_kraken_databases/minimal"
            }
            workflow {
                """
                // define inputs of the workflow here. Example:
                input[0] = file("${params.test_loc}/test_manifests/test_input_manifest_located.csv")
                """
            }
        }

        then {
            assert workflow.success
            assert snapshot(workflow.out).match()
        }

    }

}
